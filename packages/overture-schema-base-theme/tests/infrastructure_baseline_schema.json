{
  "$defs": {
    "InfrastructureClass": {
      "description": "Further classification of the infrastructure type.",
      "enum": [
        "aerialway_station",
        "airport",
        "airport_gate",
        "airstrip",
        "apron",
        "aqueduct",
        "artwork",
        "atm",
        "barrier",
        "bell_tower",
        "bench",
        "bicycle_parking",
        "bicycle_rental",
        "block",
        "boardwalk",
        "bollard",
        "border_control",
        "breakwater",
        "bridge",
        "bridge_support",
        "bump_gate",
        "bus_route",
        "bus_station",
        "bus_stop",
        "bus_trap",
        "cable",
        "cable_barrier",
        "cable_car",
        "cable_distribution",
        "camp_site",
        "cantilever",
        "catenary_mast",
        "cattle_grid",
        "chain",
        "chair_lift",
        "charging_station",
        "city_wall",
        "communication_line",
        "communication_pole",
        "communication_tower",
        "connection",
        "cooling",
        "covered",
        "crossing",
        "cutline",
        "cycle_barrier",
        "dam",
        "defensive",
        "ditch",
        "diving",
        "drag_lift",
        "drain",
        "drinking_water",
        "entrance",
        "fence",
        "ferry_terminal",
        "fire_hydrant",
        "fountain",
        "full-height_turnstile",
        "gasometer",
        "gate",
        "generator",
        "give_way",
        "gondola",
        "goods",
        "guard_rail",
        "hampshire_gate",
        "handrail",
        "hedge",
        "height_restrictor",
        "heliostat",
        "helipad",
        "heliport",
        "hose",
        "information",
        "insulator",
        "international_airport",
        "j-bar",
        "jersey_barrier",
        "kerb",
        "kissing_gate",
        "launchpad",
        "lift_gate",
        "lighting",
        "lightning_protection",
        "magic_carpet",
        "manhole",
        "milestone",
        "military_airport",
        "minaret",
        "minor_line",
        "mixed_lift",
        "mobile_phone_tower",
        "monitoring",
        "motorcycle_parking",
        "motorway_junction",
        "movable",
        "municipal_airport",
        "observation",
        "parking",
        "parking_entrance",
        "parking_space",
        "pedestrian_crossing",
        "picnic_table",
        "pier",
        "pipeline",
        "plant",
        "planter",
        "platform",
        "platter",
        "portal",
        "post_box",
        "power_line",
        "power_pole",
        "power_tower",
        "private_airport",
        "pylon",
        "quay",
        "radar",
        "railway_halt",
        "railway_station",
        "recycling",
        "regional_airport",
        "reservoir_covered",
        "retaining_wall",
        "roller_coaster",
        "rope_tow",
        "runway",
        "sally_port",
        "seaplane_airport",
        "sewer",
        "silo",
        "siren",
        "stile",
        "stop",
        "stop_position",
        "stopway",
        "storage_tank",
        "street_cabinet",
        "street_lamp",
        "substation",
        "subway_station",
        "swing_gate",
        "switch",
        "t-bar",
        "taxilane",
        "taxiway",
        "terminal",
        "toilets",
        "toll_booth",
        "traffic_signals",
        "transformer",
        "trestle",
        "utility_pole",
        "vending_machine",
        "viaduct",
        "viewpoint",
        "wall",
        "waste_basket",
        "waste_disposal",
        "watchtower",
        "water_tower",
        "weir",
        "zip_line"
      ],
      "title": "InfrastructureClass",
      "type": "string"
    },
    "InfrastructureSubtype": {
      "description": "Further description of the type of infrastructure.",
      "enum": [
        "aerialway",
        "airport",
        "barrier",
        "bridge",
        "communication",
        "emergency",
        "manhole",
        "pedestrian",
        "pier",
        "power",
        "quay",
        "recreation",
        "tower",
        "transit",
        "transportation",
        "utility",
        "waste_management",
        "water"
      ],
      "title": "InfrastructureSubtype",
      "type": "string"
    },
    "NameRule": {
      "additionalProperties": false,
      "description": "Name rule with variant and language specification.",
      "properties": {
        "between": {
          "description": "The linearly-referenced sub-segment of the geometry, specified as a range (pair) of percentage displacements from the start of the geometry, that the containing NameRule applies to.",
          "items": {
            "maximum": 1.0,
            "minimum": 0.0,
            "type": "number"
          },
          "maxItems": 2,
          "minItems": 2,
          "title": "Between",
          "type": "array"
        },
        "language": {
          "description": "IETF BCP-47 language tag",
          "pattern": "^(?:(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}?)|(?:[A-Za-z]{4,8}))(?:-[A-Za-z]{4})?(?:-[A-Za-z]{2}|[0-9]{3})?(?:-(?:[A-Za-z0-9]{5,8}|[0-9][A-Za-z0-9]{3}))*(?:-[A-WY-Za-wy-z0-9](?:-[A-Za-z0-9]{2,8})+)*$",
          "title": "Language",
          "type": "string"
        },
        "perspectives": {
          "$ref": "#/$defs/Perspectives",
          "description": "Political perspectives from which a named feature is viewed."
        },
        "side": {
          "$ref": "#/$defs/Side",
          "description": "The side, either left or right, that the containing NameRule applies to."
        },
        "value": {
          "description": "String with no leading/trailing whitespace",
          "minLength": 1,
          "pattern": "^(\\S.*)?\\S$",
          "title": "Value",
          "type": "string"
        },
        "variant": {
          "$ref": "#/$defs/NameVariant"
        }
      },
      "required": [
        "value",
        "variant"
      ],
      "title": "NameRule",
      "type": "object"
    },
    "NameVariant": {
      "enum": [
        "common",
        "official",
        "alternate",
        "short"
      ],
      "title": "NameVariant",
      "type": "string"
    },
    "Names": {
      "additionalProperties": false,
      "description": "Multilingual names container.",
      "properties": {
        "common": {
          "additionalProperties": false,
          "patternProperties": {
            "^(?:(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}?)|(?:[A-Za-z]{4,8}))(?:-[A-Za-z]{4})?(?:-[A-Za-z]{2}|[0-9]{3})?(?:-(?:[A-Za-z0-9]{5,8}|[0-9][A-Za-z0-9]{3}))*(?:-[A-WY-Za-wy-z0-9](?:-[A-Za-z0-9]{2,8})+)*$": {
              "description": "String with no leading/trailing whitespace",
              "pattern": "^(\\S.*)?\\S$",
              "type": "string"
            }
          },
          "propertyNames": {
            "description": "IETF BCP-47 language tag"
          },
          "title": "Common",
          "type": "object"
        },
        "primary": {
          "description": "The most commonly used name.",
          "minLength": 1,
          "pattern": "^(\\S.*)?\\S$",
          "title": "Primary",
          "type": "string"
        },
        "rules": {
          "description": "Rules for names that cannot be specified in the simple common names property. These rules can cover other name variants such as official, alternate, and short; and they can optionally include geometric scoping (linear referencing) and side-of-road scoping for complex cases.",
          "items": {
            "$ref": "#/$defs/NameRule"
          },
          "title": "Rules",
          "type": "array"
        }
      },
      "required": [
        "primary"
      ],
      "title": "Names",
      "type": "object"
    },
    "PerspectiveMode": {
      "description": "Perspective mode for disputed names.",
      "enum": [
        "accepted_by",
        "disputed_by"
      ],
      "title": "PerspectiveMode",
      "type": "string"
    },
    "Perspectives": {
      "additionalProperties": false,
      "description": "Political perspectives container.",
      "properties": {
        "countries": {
          "description": "Countries holding the given mode of perspective.",
          "items": {
            "description": "ISO 3166-1 alpha-2 country code",
            "maxLength": 2,
            "minLength": 2,
            "pattern": "^[A-Z]{2}$",
            "type": "string"
          },
          "minItems": 1,
          "title": "Countries",
          "type": "array",
          "uniqueItems": true
        },
        "mode": {
          "$ref": "#/$defs/PerspectiveMode",
          "description": "Whether the perspective holder accepts or disputes this name."
        }
      },
      "required": [
        "mode",
        "countries"
      ],
      "title": "Perspectives",
      "type": "object"
    },
    "Side": {
      "description": "The side, left or right, on which something appears relative to a facing or heading direction\n(*e.g.*, the side of a road relative to the road orientation), or relative to the direction of\ntravel of a person or vehicle.",
      "enum": [
        "left",
        "right"
      ],
      "title": "Side",
      "type": "string"
    },
    "SourceItem": {
      "additionalProperties": false,
      "description": "Specifies the source of the data used for a feature or one of its properties.",
      "properties": {
        "between": {
          "description": "The linearly-referenced sub-segment of the geometry, specified as a range (pair) of percentage displacements from the start of the geometry, that the containing SourceItem applies to.",
          "items": {
            "maximum": 1.0,
            "minimum": 0.0,
            "type": "number"
          },
          "maxItems": 2,
          "minItems": 2,
          "title": "Between",
          "type": "array"
        },
        "confidence": {
          "description": "Confidence value from the source dataset.\n\nThis is a value between 0.0 and 1.0 and is particularly relevant for ML-derived data.",
          "maximum": 1.0,
          "minimum": 0.0,
          "title": "Confidence",
          "type": "number"
        },
        "dataset": {
          "description": "Name of the dataset where the source data can be found.",
          "title": "Dataset",
          "type": "string"
        },
        "license": {
          "description": "Source data license name.\n\nThis should be a valid SPDX license identifier when available.\n\nIf omitted, contact the data provider for more license information.",
          "pattern": "^(\\S.*)?\\S$",
          "title": "License",
          "type": "string"
        },
        "property": {
          "description": "A JSON Pointer identifying the property (field) that this source information applies to.\n\nThe root document value `\"\"` indicates that this source information applies to the\nentire feature, excepting properties (fields) for which a dedicated source information\nrecord exists.\n\nAny other JSON Pointer apart from `\"\"` indicates that this source record provides\ndedicated source information for the property at the path in the JSON Pointer. As an\nexample, the value `\"/names/common/en\"` indicates that the source information applies to\nthe English common name of a named feature, while the value `\"/geometry\"` indicates that\nit applies to the feature geometry.",
          "title": "Property",
          "type": "string"
        },
        "record_id": {
          "description": "Identifies the specific record within the source dataset where the source data can\nbe found.\n\nThe format of record identifiers is dataset-specific.",
          "title": "Record Id",
          "type": "string"
        },
        "update_time": {
          "description": "Timestamp when the feature was last updated",
          "format": "date-time",
          "title": "Update Time",
          "type": "string"
        }
      },
      "required": [
        "property",
        "dataset"
      ],
      "title": "SourceItem",
      "type": "object"
    },
    "SurfaceMaterial": {
      "description": "Surface material enum used by infrastructure and land features.",
      "enum": [
        "asphalt",
        "cobblestone",
        "compacted",
        "concrete",
        "concrete_plates",
        "dirt",
        "earth",
        "fine_gravel",
        "grass",
        "gravel",
        "ground",
        "paved",
        "paving_stones",
        "pebblestone",
        "recreation_grass",
        "recreation_paved",
        "recreation_sand",
        "rubber",
        "sand",
        "sett",
        "tartan",
        "unpaved",
        "wood",
        "woodchips"
      ],
      "title": "SurfaceMaterial",
      "type": "string"
    }
  },
  "additionalProperties": false,
  "description": "Various features from OpenStreetMap such as bridges, airport runways, aerialways,\nor communication towers and lines.",
  "properties": {
    "bbox": {
      "description": "An optional bounding box for the feature",
      "items": {
        "type": "number"
      },
      "maxItems": 4,
      "minItems": 4,
      "title": "Bbox",
      "type": "array"
    },
    "geometry": {
      "description": "Geometry (Point, LineString, Polygon, or MultiPolygon)",
      "oneOf": [
        {
          "properties": {
            "bbox": {
              "items": {
                "type": "number"
              },
              "minItems": 4,
              "type": "array"
            },
            "coordinates": {
              "items": {
                "items": {
                  "type": "number"
                },
                "maxItems": 3,
                "minItems": 2,
                "type": "array"
              },
              "minItems": 2,
              "type": "array"
            },
            "type": {
              "const": "LineString",
              "type": "string"
            }
          },
          "required": [
            "type",
            "coordinates"
          ],
          "type": "object"
        },
        {
          "properties": {
            "bbox": {
              "items": {
                "type": "number"
              },
              "minItems": 4,
              "type": "array"
            },
            "coordinates": {
              "items": {
                "items": {
                  "items": {
                    "items": {
                      "type": "number"
                    },
                    "maxItems": 3,
                    "minItems": 2,
                    "type": "array"
                  },
                  "minItems": 4,
                  "type": "array"
                },
                "minItems": 1,
                "type": "array"
              },
              "minItems": 1,
              "type": "array"
            },
            "type": {
              "const": "MultiPolygon",
              "type": "string"
            }
          },
          "required": [
            "type",
            "coordinates"
          ],
          "type": "object"
        },
        {
          "properties": {
            "bbox": {
              "items": {
                "type": "number"
              },
              "minItems": 4,
              "type": "array"
            },
            "coordinates": {
              "items": {
                "type": "number"
              },
              "maxItems": 3,
              "minItems": 2,
              "type": "array"
            },
            "type": {
              "const": "Point",
              "type": "string"
            }
          },
          "required": [
            "type",
            "coordinates"
          ],
          "type": "object"
        },
        {
          "properties": {
            "bbox": {
              "items": {
                "type": "number"
              },
              "minItems": 4,
              "type": "array"
            },
            "coordinates": {
              "items": {
                "items": {
                  "items": {
                    "type": "number"
                  },
                  "maxItems": 3,
                  "minItems": 2,
                  "type": "array"
                },
                "minItems": 4,
                "type": "array"
              },
              "minItems": 1,
              "type": "array"
            },
            "type": {
              "const": "Polygon",
              "type": "string"
            }
          },
          "required": [
            "type",
            "coordinates"
          ],
          "type": "object"
        }
      ],
      "title": "Geometry"
    },
    "id": {
      "description": "A feature ID. This may be an ID associated with the Global Entity Reference System (GERS) if\u2014and-only-if the feature represents an entity that is part of GERS.",
      "minLength": 1,
      "pattern": "^\\S+$",
      "title": "Id",
      "type": "string"
    },
    "properties": {
      "additionalProperties": false,
      "not": {
        "required": [
          "id",
          "bbox",
          "geometry"
        ]
      },
      "patternProperties": {
        "^ext_.*$": {
          "description": "Additional top-level properties are allowed if prefixed by `ext_`.\n\nThis feature is a on a deprecation path and will be removed once the schema is\nfully migrated to Pydantic."
        }
      },
      "properties": {
        "class": {
          "$ref": "#/$defs/InfrastructureClass"
        },
        "height": {
          "description": "Height of the feature in meters.",
          "exclusiveMinimum": 0,
          "title": "Height",
          "type": "number"
        },
        "level": {
          "description": "Z-order of the feature where 0 is visual level",
          "maximum": 2147483647,
          "minimum": -2147483648,
          "title": "Level",
          "type": "integer"
        },
        "names": {
          "$ref": "#/$defs/Names"
        },
        "source_tags": {
          "additionalProperties": true,
          "description": "Any attributes/tags from the original source data that should be passed through.",
          "title": "Source Tags",
          "type": "object"
        },
        "sources": {
          "description": "Information about the source data used to assemble the feature.",
          "items": {
            "$ref": "#/$defs/SourceItem"
          },
          "minItems": 1,
          "title": "Sources",
          "type": "array",
          "uniqueItems": true
        },
        "subtype": {
          "$ref": "#/$defs/InfrastructureSubtype"
        },
        "surface": {
          "$ref": "#/$defs/SurfaceMaterial"
        },
        "theme": {
          "const": "base",
          "title": "Theme",
          "type": "string"
        },
        "type": {
          "const": "infrastructure",
          "title": "Type",
          "type": "string"
        },
        "version": {
          "description": "",
          "maximum": 2147483647,
          "minimum": 0,
          "title": "Version",
          "type": "integer"
        },
        "wikidata": {
          "description": "Wikidata identifier (Q followed by digits)",
          "pattern": "^Q\\d+$",
          "title": "Wikidata",
          "type": "string"
        }
      },
      "required": [
        "theme",
        "type",
        "version",
        "class",
        "subtype"
      ],
      "type": "object"
    },
    "type": {
      "const": "Feature",
      "type": "string"
    }
  },
  "required": [
    "type",
    "id",
    "geometry",
    "properties"
  ],
  "title": "Infrastructure Schema",
  "type": "object"
}